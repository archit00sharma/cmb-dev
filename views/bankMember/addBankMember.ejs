<%- include("../partials/head") %>

<%- include("../partials/bodyStartWithNavBar") %>
<%- include("../partials/sideNav") %>
<div id="layoutSidenav_content">
    <main>
        <%- include("../partials/alertMsg") %>
        <div class="page-header pb-10 page-header-dark">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col">
                        <div class="page-header-content">
                            <h1 class="page-header-title fs-md-35 fs-20">

                                <div class="page-header-icon"><i class="fad fa-at text-white"></i></div>
                                <span class=" text-capitalize">
                                    Bank Member
                                </span>
                            </h1>
                            <div class="page-header-subtitle fs-md-19 fs-14 text-capitalize">
                                Add Bank Member
                            </div>
                        </div>
                    </div>
                    <div class="col-auto mb-md-0 mb-3">
                        <a href="/bankMember/viewBankMember"
                            class="btn btn-sm btn-light font-weight-bold text-uppercase text-primary float-right"
                            data-toggle="tooltip" title="View all Managers"><i class="fa fa-eye"></i>&nbsp;
                            View</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid mt-n10">
            <div class="card">
                <div class="card-header">Add Bank Member</div>
                <div class="card-body">
                    <div class="sbp-preview">
                        <div class="sbp-preview-content p-4">

                            <form method="POST" action="/bankMember/addBankMemberData" accept-charset="UTF-8"
                                id="j-forms" class="j-forms row mx-0">


                                <div style="display:none;" class="form-group col-md-6 col-12">
                                    <input name="addMember" class="form-control form-control-solid" type="text"
                                        id="addMember" value="bankMember">
                                </div>

                                <div class="form-group col-md-6 col-12">
                                    <label class='control-label text-bold' for="first-name">Name<span>*</span></label>
                                    <input name="name" class="form-control form-control-solid" type="text"
                                        placeholder="Please enter name" required id="first-name">
                                </div>
                                <div class="form-group col-md-6 col-12">
                                    <label class="control-label text-bold" for="email">Email<span
                                            class="">*</span></label>
                                    <input name="email" class="form-control form-control-solid" type="email"
                                        placeholder="Please enter email" required id="email">

                                </div>

                                <div id="managerFields" class="form-icon-wrap">
                                    <div id="inManagerFields" class="form-wrapper">


                                        <div id="addProduct" class="form-group form-info" style="position: relative">
                                            <label class="control-label text-bold"
                                                for="product[]">Product<span></span></label>

                                            <select id="product0" required multiple
                                                data-placeholder="Begin typing a name to filter..."
                                                class="chosen-select form-control form-control-solid"
                                                name="product[0][]">

                                                <% for (let i=0; i <product.length; i++ ) { %>
                                                <option id="<%=product[i]._id%>" value="<%=product[i].product%>">
                                                    <%=product[i].product%>
                                                </option>
                                                <% } %>
                                            </select>

                                        </div>

                                        <div id="addBank" class="form-group form-info" style="position: relative">
                                            <label class="control-label text-bold" for="bank">Bank<span></span></label>
                                            <select id="bank0" multiple required
                                                data-placeholder="Begin typing a name to filter..."
                                                class="chosen-select form-control form-control-solid" name="bank[0][]">

                                                <% for (let i=0; i <bank.length; i++ ) { %>
                                                <option value="<%=bank[i].bank%>">
                                                    <%=bank[i].bank%>
                                                </option>
                                                <% } %>
                                            </select>
                                        </div>




                                    </div>
                                    <div id="plus" class="icon">
                                        <div class="icon-wrap">
                                            <i class="fa fa-plus" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-md-6 col-12">
                                    <label class="control-label text-bold" for="password">Password<span
                                            class="">*</span></label>
                                    <input name="password" class="form-control form-control-solid" type="password"
                                        minlength="5" placeholder="Please enter password" required id="password">
                                </div>
                                <div class="form-group col-12 mt-2">
                                    <label class="control-label text-2x" for="first-name">Permissions<span
                                            class="required"></span></label>
                                    <div class="row">

                                        <!-- Music Category Manger -->
                                        <div class="col-lg-4 col-md-6 col-12 my-2">
                                            <div class="row shadow bg-white rounded-10 py-3 px-2 mx-0 h-100">
                                                <div class="form-group col-md-12 mb-0">
                                                    <label class="control-label text-primary"><i
                                                            class="fad fa-shield-alt"></i>Bank Member Permisions
                                                    </label>

                                                    <div class="custom-control custom-switch">

                                                        <input type="checkbox"
                                                            class="custom-control-input selectallmusiccategorymanager"
                                                            name="selectall" id="selectallmusiccategorymanager">

                                                        <label
                                                            class="custom-control-label fs-14 text-uppercase font-weight-900"
                                                            for="selectallmusiccategorymanager">Select
                                                            all
                                                            Permissions</label>
                                                        <script>
                                                            $(document).ready(function () {
                                                                $("#selectallmusiccategorymanager").click(
                                                                    function () {
                                                                        if (this.checked) {
                                                                            $('.selectallmusiccategorymanager')
                                                                                .each(
                                                                                    function () {
                                                                                        $(".selectallmusiccategorymanager")
                                                                                            .prop('checked',
                                                                                                true);
                                                                                    })
                                                                        } else {
                                                                            $('.selectallmusiccategorymanager')
                                                                                .each(
                                                                                    function () {
                                                                                        $(".selectallmusiccategorymanager")
                                                                                            .prop('checked',
                                                                                                false);
                                                                                    })
                                                                        }
                                                                    });
                                                            });
                                                        </script>
                                                    </div>

                                                    <div class="custom-control custom-switch">

                                                        <input type="checkbox"
                                                            class="custom-control-input selectallmusiccategorymanager"
                                                            id="selectallmusiccategorymanager-create_category"
                                                            value="upload_case" name="permissions[]">

                                                        <label class="custom-control-label fs-14 font-weight-normal"
                                                            for="selectallmusiccategorymanager-create_category">Upload
                                                            Case</label>
                                                    </div>

                                                    <div class="custom-control custom-switch">

                                                        <input type="checkbox"
                                                            class="custom-control-input selectallmusiccategorymanager"
                                                            id="selectallmusiccategorymanager-edit_contest_category"
                                                            value="pdf" name="permissions[]">

                                                        <label class="custom-control-label fs-14 font-weight-normal"
                                                            for="selectallmusiccategorymanager-edit_contest_category">Pdf</label>
                                                    </div>

                                                    <div class="custom-control custom-switch">

                                                        <input type="checkbox"
                                                            class="custom-control-input selectallmusiccategorymanager"
                                                            id="selectallmusiccategorymanager-view_contest_category"
                                                            value="excel" name="permissions[]">

                                                        <label class="custom-control-label fs-14 font-weight-normal"
                                                            for="selectallmusiccategorymanager-view_contest_category">Excel</label>
                                                    </div>

                                                    <div class="custom-control custom-switch">

                                                        <input type="checkbox"
                                                            class="custom-control-input selectallmusiccategorymanager"
                                                            id="selectallmusiccategorymanager-add_contest_category"
                                                            value="case_images" name="permissions[]">

                                                        <label class="custom-control-label fs-14 font-weight-normal"
                                                            for="selectallmusiccategorymanager-add_contest_category">Case
                                                            Images</label>
                                                    </div>


                                                    <div class="custom-control custom-switch">

                                                        <input type="checkbox"
                                                            class="custom-control-input selectallmusiccategorymanager"
                                                            id="selectallmusiccategorymanager-delete_contest_category"
                                                            value="view_case" name="permissions[]">

                                                        <label class="custom-control-label fs-14 font-weight-normal"
                                                            for="selectallmusiccategorymanager-delete_contest_category">View
                                                            Cases</label>
                                                    </div>


                                                    <div class="custom-control custom-switch">

                                                        <input type="checkbox"
                                                            class="custom-control-input selectallmusiccategorymanager"
                                                            id="selectallmusiccategorymanager-active_contest_category"
                                                            value="active" name="permissions[]">

                                                        <label class="custom-control-label fs-14 font-weight-normal"
                                                            for="selectallmusiccategorymanager-active_contest_category">Active</label>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>
                                        <!-- End Music Category Manger -->

                                    </div>
                                </div>
                                <div class="col-12 text-right mt-4 mb-2">
                                    <button class="btn btn-sm btn-success text-uppercase">
                                        <i class="far fa-check-circle"></i>&nbsp;Submit
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <%- include("../partials/footer") %>

    <script>
        $(window).on('load', function () {
            $('#preloader_admin').hide();
        })

        $('#special').on('click', function () {
            mySelect.find('option:selected').prop('disabled', true);
            mySelect.selectpicker('refresh');
        });

        $('#special2').on('click', function () {
            mySelect.find('option:disabled').prop('disabled', false);
            mySelect.selectpicker('refresh');
        });

        $('#basic2').selectpicker({
            liveSearch: true,
            maxOptions: 1
        });

        $(document).ready(function () {
            if ($('#accordionSidenavPages a').hasClass('active')) {
                $('#accordionSidenavPages a.active').parent().parent().prev('a').removeClass('collapsed');
                $('#accordionSidenavPages a.active').parent().parent().addClass('show');

            } else {
                $('#takeonebar').addClass('slamdown');
            }
        });

        $(document).ready(function () {
            $('#select_all').on('click', function () {
                if (this.checked) {
                    $('.checkbox').each(function () {
                        this.checked = true;
                    });
                } else {
                    $('.checkbox').each(function () {
                        this.checked = false;
                    });
                }
            });
            $('.checkbox').on('click', function () {
                if ($('.checkbox:checked').length == $('.checkbox').length) {
                    $('#select_all').prop('checked', true);
                } else {
                    $('#select_all').prop('checked', false);
                }
            });
        });

        let count = 1;
        $("#plus").click(function () {
            $("#count").val(count)
            $("#managerFields").append(`<div id="inManagerFields${count}" class="form-wrapper">
                                                    <div id="addProduct${count}" class="form-group form-info"
                                                        style="position: relative">
                                                <select  id="product${count}" multiple required
                                                            class="chosen-select form-control form-control-solid"
                                                            name="product[${count}][]">
                                                           
                                                            <% for (let i=0; i <product.length; i++ ) { %>
                                                                <option id="<%=product[i]._id%>"
                                                                    value="<%=product[i].product%>">
                                                                    <%=product[i].product%>
                                                                </option>
                                                                <% } %>
                                                        </select>
                                                    </div>
                                                    <div id="addBank${count}" class="form-group form-info"
                                                        style="position: relative">
                                                        <select   id="bank${count}" multiple required
                                                            class="chosen-select form-control form-control-solid"
                                                            name="bank[${count}][]">
                                                            
                                                            <% for (let i=0; i <bank.length; i++ ) { %>
                                                                <option value="<%=bank[i].bank%>">
                                                                    <%=bank[i].bank%>
                                                                </option>
                                                                <% } %>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div id="${count}minus" class="icon icon2" onclick="deleteMinus(this.id)" >
                                                        <div class="icon-wrap">
                                                            <i class="fa fa-minus" aria-hidden="true"></i>
                                                        </div>
                                                </div>`)
            count++
        })

        function deleteMinus(x) {
            let y = parseInt(x)

            $(`#inManagerFields${y}`).remove()
            $(`#${x}`).remove()
            count--
            $("#count").val(count)
        }
    </script>